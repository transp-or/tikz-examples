\usepackage{etex}
\usepackage[pspdf={-dDELAYSAFER}]{auto-pst-pdf}
\usepackage{fp}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{positioning, calc, arrows, arrows.meta, shapes, fit,
  spy, patterns, math}
\usepackage{pgfplots}
\usepgfplotslibrary{fillbetween}
\pgfplotsset{compat=1.17}
\usepackage{courier}
\usepackage{listings}
\lstset{basicstyle=\tiny\ttfamily,breaklines=true}
\lstset{framextopmargin=50pt,frame=bottomline}
\usepackage{epsfig}
\usepackage{fp}

\newcommand{\withcode}[2]{
  \begin{figure}
    \begin{center}
      \input{#1} 
    \end{center}
    \lstinputlisting{#1}
    \caption{\texttt{#1.tex}: #2}
\end{figure}}


\newcommand{\withoutcode}[2]{
  \begin{figure}
    \begin{center}
      \input{#1} 
    \end{center}
    \caption{\texttt{#1.tex}: #2}
\end{figure}}
